<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Happy Birthday</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
  <link href="https://fonts.googleapis.com/css2?family=Dancing+Script&display=swap" rel="stylesheet" />
  <style>
    * { box-sizing: border-box; }

    body {
      height: 100vh;
      margin: 0;
      background-size: 1000px;
      background-image: url("https://www.psdgraphics.com/wp-content/uploads/2022/01/white-math-paper-texture.jpg");
      background-position: center;
      display: flex;
      align-items: center;
      justify-content: center;
      overflow: hidden;
      font-family: 'Dancing Script', cursive;
    }

    .paper {
      position: absolute;
      width: 340px;
      min-height: 200px;
      max-width: 90vw;
      padding: 20px;
      background-image: url("https://i0.wp.com/textures.world/wp-content/uploads/2018/10/2-Millimeter-Paper-Background-copy.jpg?ssl=1");
      background-size: cover;
      background-repeat: no-repeat;
      border-radius: 8px;
      transform: translate(-50%, -50%) rotateZ(-5deg);
      box-shadow: 1px 15px 20px rgba(0, 0, 0, 0.5);
      touch-action: none;
      user-select: none;
      display: none;
      left: 50%;
      top: 50%;
      overflow: hidden;
      z-index: 1;
      transition: left 0.3s ease, top 0.3s ease;
    }

    .paper.show { display: block; }

    .paper.heart {
      width: 200px;
      height: 200px;
      padding: 0;
      border-radius: 50%;
    }

    .paper.heart::after {
      content: "";
      background-image: url("https://cdn.pixabay.com/photo/2016/03/31/19/25/cartoon-1294994__340.png");
      background-size: 150px;
      background-repeat: no-repeat;
      background-position: center;
      opacity: 0.6;
      position: absolute;
      top: 0; left: 0; right: 0; bottom: 0;
    }

    .paper.image { padding: 10px; }
    .paper.image p { font-size: 30px; }

    .paper img {
      max-height: 500px;
      width: 100%;
      object-fit: cover;
      user-select: none;
    }

    p {
      font-size: 50px;
      color: rgb(0, 0, 100);
      opacity: 0.75;
      user-select: none;
      margin: 5px 0;
    }

    .paper.red p { color: red; }

    #startBtn {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      font-size: 24px;
      padding: 20px 40px;
      background: pink;
      border: none;
      border-radius: 12px;
      font-family: 'Dancing Script', cursive;
      z-index: 9999;
      cursor: pointer;
    }

    #birthday-paper p, .paper.image p {
      font-weight: bold;
    }
  </style>
</head>
<body>

  <button id="startBtn">Tap to Start üéâ</button>

  <div class="paper"><p>Drag down each paper to reveal the next!</p></div>
  <div class="paper"><p>Welcome To My Creative World <span style="color: red;">‚ù§Ô∏è</span></p></div>
  <div class="paper"><p>As you know, you are my everything üòç</p></div>
  <div class="paper"><p>You‚Äôre not just a part of my day‚Äîyou are the reason my day feels complete</p></div>
  <div class="paper"><p>Today is very special day for you and also for me ü•∞</p></div>

  <div class="paper image" id="birthday-paper">
    <p>Wishing you a very very Happy Birthday my cutie sweetie darshu! Keep smiling and be happy... May this year be filled with success, growth, great moments, new opportunities, and strong connections. God bless you üíóü•πüßø</p>
  </div>

  <div class="paper image">
    <img src="new.png" alt="Love Image 2" />
  </div>

  <div class="paper heart"></div>

  <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>

  <script>
    const papers = document.querySelectorAll('.paper');
    const birthdayPaper = document.getElementById('birthday-paper');
    const startBtn = document.getElementById('startBtn');
    let celebrationTriggered = false;

    // Start button logic
    startBtn.addEventListener('click', () => {
      papers[0].classList.add('show');
      startBtn.remove();
    });

    // Confetti logic
    const configs = [
      { angle: 90, origin: { x: 0.5, y: 0.9 } },
      { angle: 270, origin: { x: 0.5, y: 0 } },
      { angle: 180, origin: { x: 1.1, y: 0.5 } },
      { angle: 360, origin: { x: -0.1, y: 0.5 } },
    ];

    function launchConfetti() {
      configs.forEach((cfg, i) => {
        setTimeout(() => {
          confetti({
            particleCount: 100,
            spread: 70,
            angle: cfg.angle,
            origin: cfg.origin,
            ticks: 300,
            gravity: 0.4,
            zIndex: 9999
          });
        }, i * 700);
      });
    }

    const observer = new MutationObserver(() => {
      if (birthdayPaper.classList.contains('show') && !celebrationTriggered) {
        celebrationTriggered = true;
        launchConfetti();
      }
    });

    observer.observe(birthdayPaper, { attributes: true, attributeFilter: ['class'] });

    // Enable dragging for each paper
    const enableDragging = (paper, index) => {
      let isDragging = false;
      let startX, startY, initX, initY;
      let nextRevealed = false;

      const threshold = 50;  // Threshold to reveal next paper (in pixels)

      const onStart = (e) => {
        isDragging = true;
        nextRevealed = false;
        const clientX = e.type.includes('touch') ? e.touches[0].clientX : e.clientX;
        const clientY = e.type.includes('touch') ? e.touches[0].clientY : e.clientY;
        startX = clientX;
        startY = clientY;
        initX = paper.offsetLeft;
        initY = paper.offsetTop;

        paper.style.zIndex = 500 + index;  // Send current paper to background

        e.preventDefault();
      };

      const onMove = (e) => {
        if (!isDragging) return;
        const clientX = e.type.includes('touch') ? e.touches[0].clientX : e.clientX;
        const clientY = e.type.includes('touch') ? e.touches[0].clientY : e.clientY;
        const deltaX = clientX - startX;
        const deltaY = clientY - startY;

        paper.style.left = `${initX + deltaX}px`;
        paper.style.top = `${initY + deltaY}px`;
      };

      const onEnd = () => {
        if (!isDragging) return;
        isDragging = false;

        // Check if the paper has been dragged enough to show the next paper
        const deltaX = paper.offsetLeft - initX;
        const deltaY = paper.offsetTop - initY;
        
        if (!nextRevealed && (Math.abs(deltaX) > threshold || Math.abs(deltaY) > threshold)) {
          nextRevealed = true;
          const nextIndex = index + 1;
          if (nextIndex < papers.length) {
            // Delay the appearance of the next paper to make it smoother
            setTimeout(() => {
              const nextPaper = papers[nextIndex];
              nextPaper.classList.add('show');
              nextPaper.style.zIndex = 1000 + nextIndex;
              nextPaper.style.left = '50%';
              nextPaper.style.top = '50%';
            }, 200); // Add delay before showing the next paper
          }
        }
      };

      paper.addEventListener('mousedown', onStart);
      document.addEventListener('mousemove', onMove);
      document.addEventListener('mouseup', onEnd);
      paper.addEventListener('touchstart', onStart, { passive: false });
      document.addEventListener('touchmove', onMove, { passive: false });
      document.addEventListener('touchend', onEnd);
    };

    papers.forEach((paper, index) => enableDragging(paper, index));
  </script>

</body>
</html>
